{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./","data":{"isAsync":false}},{"name":"../../utils","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = exports.DOWNLOAD_TASK = exports.UPLOAD_TASK = void 0;\n\n  var _extends2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/extends\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  var _ = _$$_REQUIRE(_dependencyMap[4], \"./\");\n\n  var _utils = _$$_REQUIRE(_dependencyMap[5], \"../../utils\");\n\n  var UPLOAD_TASK = 'upload';\n  exports.UPLOAD_TASK = UPLOAD_TASK;\n  var DOWNLOAD_TASK = 'download';\n  exports.DOWNLOAD_TASK = DOWNLOAD_TASK;\n\n  var StorageTask = function () {\n    function StorageTask(type, promise, storageRef) {\n      (0, _classCallCheck2.default)(this, StorageTask);\n      this.type = type;\n      this.ref = storageRef;\n      this.storage = storageRef._storage;\n      this.path = storageRef.path;\n      this.then = promise.then.bind(promise);\n      this.catch = promise.catch.bind(promise);\n    }\n\n    (0, _createClass2.default)(StorageTask, [{\n      key: \"_interceptSnapshotEvent\",\n      value: function _interceptSnapshotEvent(f) {\n        var _this = this;\n\n        if (!(0, _utils.isFunction)(f)) return null;\n        return function (snapshot) {\n          var _snapshot = (0, _extends2.default)({}, snapshot);\n\n          _snapshot.task = _this;\n          _snapshot.ref = _this.ref;\n          return f && f(_snapshot);\n        };\n      }\n    }, {\n      key: \"_interceptErrorEvent\",\n      value: function _interceptErrorEvent(f) {\n        if (!(0, _utils.isFunction)(f)) return null;\n        return function (error) {\n          var _error = new Error(error.message);\n\n          _error.code = error.code;\n          return f && f(_error);\n        };\n      }\n    }, {\n      key: \"_subscribe\",\n      value: function _subscribe(nextOrObserver, error, complete) {\n        var _this2 = this;\n\n        var _error;\n\n        var _next;\n\n        var _complete;\n\n        if (typeof nextOrObserver === 'function') {\n          _error = this._interceptErrorEvent(error);\n          _next = this._interceptSnapshotEvent(nextOrObserver);\n          _complete = this._interceptSnapshotEvent(complete);\n        } else if (nextOrObserver) {\n          _error = this._interceptErrorEvent(nextOrObserver.error);\n          _next = this._interceptSnapshotEvent(nextOrObserver.next);\n          _complete = this._interceptSnapshotEvent(nextOrObserver.complete);\n        }\n\n        if (_next) {\n          this.storage._addListener(this.path, _.statics.TaskEvent.STATE_CHANGED, _next);\n        }\n\n        if (_error) {\n          this.storage._addListener(this.path, this.type + \"_failure\", _error);\n        }\n\n        if (_complete) {\n          this.storage._addListener(this.path, this.type + \"_success\", _complete);\n        }\n\n        return function () {\n          if (_next) _this2.storage._removeListener(_this2.path, _.statics.TaskEvent.STATE_CHANGED, _next);\n          if (_error) _this2.storage._removeListener(_this2.path, _this2.type + \"_failure\", _error);\n          if (_complete) _this2.storage._removeListener(_this2.path, _this2.type + \"_success\", _complete);\n        };\n      }\n    }, {\n      key: \"on\",\n      value: function on() {\n        var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.statics.TaskEvent.STATE_CHANGED;\n        var nextOrObserver = arguments.length > 1 ? arguments[1] : undefined;\n        var error = arguments.length > 2 ? arguments[2] : undefined;\n        var complete = arguments.length > 3 ? arguments[3] : undefined;\n\n        if (!event) {\n          throw new Error(\"StorageTask.on listener is missing required string argument 'event'.\");\n        }\n\n        if (event !== _.statics.TaskEvent.STATE_CHANGED) {\n          throw new Error(\"StorageTask.on event argument must be a string with a value of '\" + _.statics.TaskEvent.STATE_CHANGED + \"'\");\n        }\n\n        if (!nextOrObserver && !error && !complete) {\n          return this._subscribe.bind(this);\n        }\n\n        return this._subscribe(nextOrObserver, error, complete);\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        throw new Error('.pause() is not currently supported by react-native-firebase');\n      }\n    }, {\n      key: \"resume\",\n      value: function resume() {\n        throw new Error('.resume() is not currently supported by react-native-firebase');\n      }\n    }, {\n      key: \"cancel\",\n      value: function cancel() {\n        throw new Error('.cancel() is not currently supported by react-native-firebase');\n      }\n    }]);\n    return StorageTask;\n  }();\n\n  exports.default = StorageTask;\n});","map":[[15,0,5,0],[17,0,6,0],[19,0,7,7],[19,6,7,13,"UPLOAD_TASK"],[19,17,7,24],[19,20,7,27],[19,28,7,7],[21,0,8,7],[21,6,8,13,"DOWNLOAD_TASK"],[21,19,8,26],[21,22,8,29],[21,32,8,7],[24,6,13,21,"StorageTask"],[24,17],[25,0,14,2],[25,25,14,14,"type"],[25,29,14,2],[25,31,14,20,"promise"],[25,38,14,2],[25,40,14,29,"storageRef"],[25,50,14,2],[25,52,14,41],[26,0,14,41],[27,0,15,4],[27,11,15,9,"type"],[27,15,15,4],[27,18,15,16,"type"],[27,22,15,4],[28,0,16,4],[28,11,16,9,"ref"],[28,14,16,4],[28,17,16,15,"storageRef"],[28,27,16,4],[29,0,17,4],[29,11,17,9,"storage"],[29,18,17,4],[29,21,17,19,"storageRef"],[29,31,17,29],[29,32,17,30,"_storage"],[29,40,17,4],[30,0,18,4],[30,11,18,9,"path"],[30,15,18,4],[30,18,18,16,"storageRef"],[30,28,18,26],[30,29,18,27,"path"],[30,33,18,4],[31,0,20,4],[31,11,20,9,"then"],[31,15,20,4],[31,18,20,16,"promise"],[31,25,20,23],[31,26,20,24,"then"],[31,30,20,16],[31,31,20,29,"bind"],[31,35,20,16],[31,36,20,34,"promise"],[31,43,20,16],[31,44,20,4],[32,0,21,4],[32,11,21,9,"catch"],[32,16,21,4],[32,19,21,17,"promise"],[32,26,21,24],[32,27,21,25,"catch"],[32,32,21,17],[32,33,21,31,"bind"],[32,37,21,17],[32,38,21,36,"promise"],[32,45,21,17],[32,46,21,4],[33,0,22,3],[37,46,31,26,"f"],[37,47],[37,49,31,29],[38,0,31,29],[40,0,32,4],[40,12,32,8],[40,13,32,9],[40,36,32,20,"f"],[40,37,32,9],[40,38,32,4],[40,40,32,24],[40,47,32,31],[40,51,32,24],[41,0,33,4],[41,15,33,11],[41,25,33,11,"snapshot"],[41,33,33,19],[41,35,33,23],[42,0,34,6],[42,14,34,12,"_snapshot"],[42,23,34,21],[42,26,34,24],[42,49,34,38],[42,51,34,24],[42,53,34,42,"snapshot"],[42,61,34,24],[42,62,34,6],[44,0,36,6,"_snapshot"],[44,10,36,6,"_snapshot"],[44,19,36,15],[44,20,36,16,"task"],[44,24,36,6],[44,27,36,23],[44,32,36,6],[45,0,37,6,"_snapshot"],[45,10,37,6,"_snapshot"],[45,19,37,15],[45,20,37,16,"ref"],[45,23,37,6],[45,26,37,22],[45,31,37,26],[45,32,37,27,"ref"],[45,35,37,6],[46,0,38,6],[46,17,38,13,"f"],[46,18,38,14],[46,22,38,18,"f"],[46,23,38,19],[46,24,38,20,"_snapshot"],[46,33,38,19],[46,34,38,6],[47,0,39,5],[47,9,33,4],[48,0,40,3],[51,43,49,23,"f"],[51,44],[51,46,49,26],[52,0,50,4],[52,12,50,8],[52,13,50,9],[52,36,50,20,"f"],[52,37,50,9],[52,38,50,4],[52,40,50,24],[52,47,50,31],[52,51,50,24],[53,0,51,4],[53,15,51,11],[53,25,51,11,"error"],[53,30,51,16],[53,32,51,20],[54,0,52,6],[54,14,52,12,"_error"],[54,20,52,18],[54,23,52,21],[54,27,52,25,"Error"],[54,32,52,21],[54,33,52,31,"error"],[54,38,52,36],[54,39,52,37,"message"],[54,46,52,21],[54,47,52,6],[56,0,55,6,"_error"],[56,10,55,6,"_error"],[56,16,55,12],[56,17,55,13,"code"],[56,21,55,6],[56,24,55,20,"error"],[56,29,55,25],[56,30,55,26,"code"],[56,34,55,6],[57,0,56,6],[57,17,56,13,"f"],[57,18,56,14],[57,22,56,18,"f"],[57,23,56,19],[57,24,56,20,"_error"],[57,30,56,19],[57,31,56,6],[58,0,57,5],[58,9,51,4],[59,0,58,3],[62,33,69,13,"nextOrObserver"],[62,47],[62,49,69,29,"error"],[62,54],[62,56,69,36,"complete"],[62,64],[62,66,69,46],[63,0,69,46],[65,0,70,4],[65,12,70,8,"_error"],[65,18,70,4],[67,0,72,4],[67,12,72,8,"_next"],[67,17,72,4],[69,0,74,4],[69,12,74,8,"_complete"],[69,21,74,4],[71,0,76,4],[71,12,76,8],[71,19,76,15,"nextOrObserver"],[71,33,76,8],[71,38,76,34],[71,48,76,4],[71,50,76,46],[72,0,77,6,"_error"],[72,10,77,6,"_error"],[72,16,77,12],[72,19,77,15],[72,24,77,20,"_interceptErrorEvent"],[72,44,77,15],[72,45,77,41,"error"],[72,50,77,15],[72,51,77,6],[73,0,78,6,"_next"],[73,10,78,6,"_next"],[73,15,78,11],[73,18,78,14],[73,23,78,19,"_interceptSnapshotEvent"],[73,46,78,14],[73,47,78,43,"nextOrObserver"],[73,61,78,14],[73,62,78,6],[74,0,79,6,"_complete"],[74,10,79,6,"_complete"],[74,19,79,15],[74,22,79,18],[74,27,79,23,"_interceptSnapshotEvent"],[74,50,79,18],[74,51,79,47,"complete"],[74,59,79,18],[74,60,79,6],[75,0,80,5],[75,9,76,4],[75,15,80,11],[75,19,80,15,"nextOrObserver"],[75,33,80,11],[75,35,80,31],[76,0,81,6,"_error"],[76,10,81,6,"_error"],[76,16,81,12],[76,19,81,15],[76,24,81,20,"_interceptErrorEvent"],[76,44,81,15],[76,45,81,41,"nextOrObserver"],[76,59,81,55],[76,60,81,56,"error"],[76,65,81,15],[76,66,81,6],[77,0,82,6,"_next"],[77,10,82,6,"_next"],[77,15,82,11],[77,18,82,14],[77,23,82,19,"_interceptSnapshotEvent"],[77,46,82,14],[77,47,82,43,"nextOrObserver"],[77,61,82,57],[77,62,82,58,"next"],[77,66,82,14],[77,67,82,6],[78,0,83,6,"_complete"],[78,10,83,6,"_complete"],[78,19,83,15],[78,22,83,18],[78,27,83,23,"_interceptSnapshotEvent"],[78,50,83,18],[78,51,83,47,"nextOrObserver"],[78,65,83,61],[78,66,83,62,"complete"],[78,74,83,18],[78,75,83,6],[79,0,84,5],[81,0,86,4],[81,12,86,8,"_next"],[81,17,86,4],[81,19,86,15],[82,0,87,6],[82,15,87,11,"storage"],[82,22,87,6],[82,23,87,19,"_addListener"],[82,35,87,6],[82,36,87,32],[82,41,87,37,"path"],[82,45,87,6],[82,47,87,43,"StorageStatics"],[82,57,87,58,"TaskEvent"],[82,66,87,43],[82,67,87,68,"STATE_CHANGED"],[82,80,87,6],[82,82,87,83,"_next"],[82,87,87,6],[83,0,88,5],[85,0,90,4],[85,12,90,8,"_error"],[85,18,90,4],[85,20,90,16],[86,0,91,6],[86,15,91,11,"storage"],[86,22,91,6],[86,23,91,19,"_addListener"],[86,35,91,6],[86,36,91,32],[86,41,91,37,"path"],[86,45,91,6],[86,47,91,46],[86,52,91,51,"type"],[86,56,91,6],[86,71,91,67,"_error"],[86,77,91,6],[87,0,92,5],[89,0,94,4],[89,12,94,8,"_complete"],[89,21,94,4],[89,23,94,19],[90,0,95,6],[90,15,95,11,"storage"],[90,22,95,6],[90,23,95,19,"_addListener"],[90,35,95,6],[90,36,95,32],[90,41,95,37,"path"],[90,45,95,6],[90,47,95,46],[90,52,95,51,"type"],[90,56,95,6],[90,71,95,67,"_complete"],[90,80,95,6],[91,0,96,5],[93,0,98,4],[93,15,98,11],[93,27,98,17],[94,0,99,6],[94,14,99,10,"_next"],[94,19,99,6],[94,21,99,17],[94,27,99,21],[94,28,99,22,"storage"],[94,35,99,17],[94,36,99,30,"_removeListener"],[94,51,99,17],[94,52,99,46],[94,58,99,50],[94,59,99,51,"path"],[94,63,99,17],[94,65,99,57,"StorageStatics"],[94,75,99,72,"TaskEvent"],[94,84,99,57],[94,85,99,82,"STATE_CHANGED"],[94,98,99,17],[94,100,99,97,"_next"],[94,105,99,17],[95,0,100,6],[95,14,100,10,"_error"],[95,20,100,6],[95,22,100,18],[95,28,100,22],[95,29,100,23,"storage"],[95,36,100,18],[95,37,100,31,"_removeListener"],[95,52,100,18],[95,53,100,47],[95,59,100,51],[95,60,100,52,"path"],[95,64,100,18],[95,66,100,61],[95,72,100,65],[95,73,100,66,"type"],[95,77,100,18],[95,92,100,82,"_error"],[95,98,100,18],[96,0,101,6],[96,14,101,10,"_complete"],[96,23,101,6],[96,25,101,21],[96,31,101,25],[96,32,101,26,"storage"],[96,39,101,21],[96,40,101,34,"_removeListener"],[96,55,101,21],[96,56,101,50],[96,62,101,54],[96,63,101,55,"path"],[96,67,101,21],[96,69,101,64],[96,75,101,68],[96,76,101,69,"type"],[96,80,101,21],[96,95,101,85,"_complete"],[96,104,101,21],[97,0,102,5],[97,9,98,4],[98,0,103,3],[101,27,114,86],[102,0,114,86],[102,12,114,5,"event"],[102,17,114,86],[102,88,114,13,"StorageStatics"],[102,98,114,28,"TaskEvent"],[102,107,114,13],[102,108,114,38,"STATE_CHANGED"],[102,121,114,86],[103,0,114,86],[103,12,114,53,"nextOrObserver"],[103,26,114,86],[104,0,114,86],[104,12,114,69,"error"],[104,17,114,86],[105,0,114,86],[105,12,114,76,"complete"],[105,20,114,86],[107,0,115,4],[107,12,115,8],[107,13,115,9,"event"],[107,18,115,4],[107,20,115,16],[108,0,116,6],[108,16,116,12],[108,20,116,16,"Error"],[108,25,116,12],[108,26,116,22],[108,96,116,12],[108,97,116,6],[109,0,117,5],[111,0,119,4],[111,12,119,8,"event"],[111,17,119,13],[111,22,119,18,"StorageStatics"],[111,32,119,33,"TaskEvent"],[111,41,119,18],[111,42,119,43,"STATE_CHANGED"],[111,55,119,4],[111,57,119,58],[112,0,120,6],[112,16,120,12],[112,20,120,16,"Error"],[112,25,120,12],[112,95,120,89,"StorageStatics"],[112,105,120,104,"TaskEvent"],[112,114,120,89],[112,115,120,114,"STATE_CHANGED"],[112,128,120,12],[112,135,120,6],[113,0,121,5],[115,0,124,4],[115,12,124,8],[115,13,124,9,"nextOrObserver"],[115,27,124,8],[115,31,124,27],[115,32,124,28,"error"],[115,37,124,8],[115,41,124,37],[115,42,124,38,"complete"],[115,50,124,4],[115,52,124,48],[116,0,125,6],[116,17,125,13],[116,22,125,18,"_subscribe"],[116,32,125,13],[116,33,125,29,"bind"],[116,37,125,13],[116,38,125,34],[116,42,125,13],[116,43,125,6],[117,0,126,5],[119,0,128,4],[119,15,128,11],[119,20,128,16,"_subscribe"],[119,30,128,11],[119,31,128,27,"nextOrObserver"],[119,45,128,11],[119,47,128,43,"error"],[119,52,128,11],[119,54,128,50,"complete"],[119,62,128,11],[119,63,128,4],[120,0,129,3],[123,30,131,10],[124,0,132,4],[124,14,132,10],[124,18,132,14,"Error"],[124,23,132,10],[124,24,132,20],[124,86,132,10],[124,87,132,4],[125,0,133,3],[128,31,135,11],[129,0,137,4],[129,14,137,10],[129,18,137,14,"Error"],[129,23,137,10],[129,24,137,20],[129,87,137,10],[129,88,137,4],[130,0,138,3],[133,31,140,11],[134,0,142,4],[134,14,142,10],[134,18,142,14,"Error"],[134,23,142,10],[134,24,142,20],[134,87,142,10],[134,88,142,4],[135,0,143,3]]},"type":"js/module"}]}