{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./utils","data":{"isAsync":false}},{"name":"./utils/serialize","data":{"isAsync":false}},{"name":"./DocumentSnapshot","data":{"isAsync":false}},{"name":"../../utils/native","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n\n  var _utils = _$$_REQUIRE(_dependencyMap[3], \"./utils\");\n\n  var _serialize = _$$_REQUIRE(_dependencyMap[4], \"./utils/serialize\");\n\n  var _DocumentSnapshot = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./DocumentSnapshot\"));\n\n  var _native = _$$_REQUIRE(_dependencyMap[6], \"../../utils/native\");\n\n  var Transaction = function () {\n    function Transaction(firestore, meta) {\n      (0, _classCallCheck2.default)(this, Transaction);\n      this._meta = meta;\n      this._commandBuffer = [];\n      this._firestore = firestore;\n      this._pendingResult = undefined;\n    }\n\n    (0, _createClass2.default)(Transaction, [{\n      key: \"_prepare\",\n      value: function _prepare() {\n        this._commandBuffer = [];\n        this._pendingResult = undefined;\n      }\n    }, {\n      key: \"get\",\n      value: function get(documentRef) {\n        var _this = this;\n\n        return (0, _native.getNativeModule)(this._firestore).transactionGetDocument(this._meta.id, documentRef.path).then(function (result) {\n          return new _DocumentSnapshot.default(_this._firestore, result);\n        });\n      }\n    }, {\n      key: \"set\",\n      value: function set(documentRef, data, options) {\n        this._commandBuffer.push({\n          type: 'set',\n          path: documentRef.path,\n          data: (0, _serialize.buildNativeMap)(data),\n          options: options || {}\n        });\n\n        return this;\n      }\n    }, {\n      key: \"update\",\n      value: function update(documentRef) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var data = (0, _utils.parseUpdateArgs)(args, 'Transaction.update');\n\n        this._commandBuffer.push({\n          type: 'update',\n          path: documentRef.path,\n          data: (0, _serialize.buildNativeMap)(data)\n        });\n\n        return this;\n      }\n    }, {\n      key: \"delete\",\n      value: function _delete(documentRef) {\n        this._commandBuffer.push({\n          type: 'delete',\n          path: documentRef.path\n        });\n\n        return this;\n      }\n    }]);\n    return Transaction;\n  }();\n\n  exports.default = Transaction;\n});","map":[[13,0,5,0],[15,0,6,0],[17,0,7,0],[19,0,8,0],[21,6,15,21,"Transaction"],[21,17],[22,0,16,2],[22,25,16,14,"firestore"],[22,34,16,2],[22,36,16,25,"meta"],[22,40,16,2],[22,42,16,31],[23,0,16,31],[24,0,17,4],[24,11,17,9,"_meta"],[24,16,17,4],[24,19,17,17,"meta"],[24,23,17,4],[25,0,18,4],[25,11,18,9,"_commandBuffer"],[25,25,18,4],[25,28,18,26],[25,30,18,4],[26,0,19,4],[26,11,19,9,"_firestore"],[26,21,19,4],[26,24,19,22,"firestore"],[26,33,19,4],[27,0,20,4],[27,11,20,9,"_pendingResult"],[27,25,20,4],[27,28,20,26,"undefined"],[27,37,20,4],[28,0,21,3],[32,33,36,13],[33,0,37,4],[33,13,37,9,"_commandBuffer"],[33,27,37,4],[33,30,37,26],[33,32,37,4],[34,0,38,4],[34,13,38,9,"_pendingResult"],[34,27,38,4],[34,30,38,26,"undefined"],[34,39,38,4],[35,0,39,3],[38,26,55,6,"documentRef"],[38,37],[38,39,55,19],[39,0,55,19],[41,0,57,4],[41,15,57,11],[41,44,57,27],[41,49,57,32,"_firestore"],[41,59,57,11],[41,61,57,44,"transactionGetDocument"],[41,83,57,11],[41,84,57,67],[41,89,57,72,"_meta"],[41,94,57,67],[41,95,57,78,"id"],[41,97,57,11],[41,99,57,82,"documentRef"],[41,110,57,93],[41,111,57,94,"path"],[41,115,57,11],[41,117,57,100,"then"],[41,121,57,11],[41,122,57,105],[41,132,57,105,"result"],[41,138,57,111],[42,0,57,111],[42,17,57,115],[42,21,57,119,"DocumentSnapshot"],[42,46,57,115],[42,47,57,136],[42,52,57,140],[42,53,57,141,"_firestore"],[42,63,57,115],[42,65,57,153,"result"],[42,71,57,115],[42,72,57,111],[43,0,57,111],[43,9,57,11],[43,10,57,4],[44,0,58,3],[47,26,74,6,"documentRef"],[47,37],[47,39,74,19,"data"],[47,43],[47,45,74,25,"options"],[47,52],[47,54,74,34],[48,0,77,4],[48,13,77,9,"_commandBuffer"],[48,27,77,4],[48,28,77,24,"push"],[48,32,77,4],[48,33,77,29],[49,0,78,6,"type"],[49,10,78,6,"type"],[49,14,78,10],[49,16,78,12],[49,21,77,29],[50,0,79,6,"path"],[50,10,79,6,"path"],[50,14,79,10],[50,16,79,12,"documentRef"],[50,27,79,23],[50,28,79,24,"path"],[50,32,77,29],[51,0,80,6,"data"],[51,10,80,6,"data"],[51,14,80,10],[51,16,80,12],[51,47,80,27,"data"],[51,51,80,12],[51,52,77,29],[52,0,81,6,"options"],[52,10,81,6,"options"],[52,17,81,13],[52,19,81,15,"options"],[52,26,81,22],[52,30,81,26],[53,0,77,29],[53,9,77,4],[55,0,84,4],[55,15,84,11],[55,19,84,4],[56,0,85,3],[59,29,100,9,"documentRef"],[59,40],[59,42,100,31],[60,0,100,31],[60,42,100,25,"args"],[60,46,100,31],[61,0,100,25,"args"],[61,10,100,25,"args"],[61,14,100,31],[62,0,100,31],[64,0,102,4],[64,12,102,10,"data"],[64,16,102,14],[64,19,102,17],[64,47,102,33,"args"],[64,51,102,17],[64,53,102,39],[64,73,102,17],[64,74,102,4],[66,0,104,4],[66,13,104,9,"_commandBuffer"],[66,27,104,4],[66,28,104,24,"push"],[66,32,104,4],[66,33,104,29],[67,0,105,6,"type"],[67,10,105,6,"type"],[67,14,105,10],[67,16,105,12],[67,24,104,29],[68,0,106,6,"path"],[68,10,106,6,"path"],[68,14,106,10],[68,16,106,12,"documentRef"],[68,27,106,23],[68,28,106,24,"path"],[68,32,104,29],[69,0,107,6,"data"],[69,10,107,6,"data"],[69,14,107,10],[69,16,107,12],[69,47,107,27,"data"],[69,51,107,12],[70,0,104,29],[70,9,104,4],[72,0,110,4],[72,15,110,11],[72,19,110,4],[73,0,111,3],[76,30,121,9,"documentRef"],[76,41],[76,43,121,22],[77,0,123,4],[77,13,123,9,"_commandBuffer"],[77,27,123,4],[77,28,123,24,"push"],[77,32,123,4],[77,33,123,29],[78,0,124,6,"type"],[78,10,124,6,"type"],[78,14,124,10],[78,16,124,12],[78,24,123,29],[79,0,125,6,"path"],[79,10,125,6,"path"],[79,14,125,10],[79,16,125,12,"documentRef"],[79,27,125,23],[79,28,125,24,"path"],[80,0,123,29],[80,9,123,4],[82,0,128,4],[82,15,128,11],[82,19,128,4],[83,0,129,3]]},"type":"js/module"}]}