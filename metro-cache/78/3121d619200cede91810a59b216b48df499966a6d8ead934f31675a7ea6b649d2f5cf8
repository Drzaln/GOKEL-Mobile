{"dependencies":[{"name":"./batch","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  exports[\"default\"] = void 0;\n\n  var _batch = _$$_REQUIRE(_dependencyMap[0], \"./batch\");\n\n  var CLEARED = null;\n  var nullListeners = {\n    notify: function notify() {}\n  };\n\n  function createListenerCollection() {\n    var batch = (0, _batch.getBatch)();\n    var current = [];\n    var next = [];\n    return {\n      clear: function clear() {\n        next = CLEARED;\n        current = CLEARED;\n      },\n      notify: function notify() {\n        var listeners = current = next;\n        batch(function () {\n          for (var i = 0; i < listeners.length; i++) {\n            listeners[i]();\n          }\n        });\n      },\n      get: function get() {\n        return next;\n      },\n      subscribe: function subscribe(listener) {\n        var isSubscribed = true;\n        if (next === current) next = current.slice();\n        next.push(listener);\n        return function unsubscribe() {\n          if (!isSubscribed || current === CLEARED) return;\n          isSubscribed = false;\n          if (next === current) next = current.slice();\n          next.splice(next.indexOf(listener), 1);\n        };\n      }\n    };\n  }\n\n  var Subscription = function () {\n    function Subscription(store, parentSub) {\n      this.store = store;\n      this.parentSub = parentSub;\n      this.unsubscribe = null;\n      this.listeners = nullListeners;\n      this.handleChangeWrapper = this.handleChangeWrapper.bind(this);\n    }\n\n    var _proto = Subscription.prototype;\n\n    _proto.addNestedSub = function addNestedSub(listener) {\n      this.trySubscribe();\n      return this.listeners.subscribe(listener);\n    };\n\n    _proto.notifyNestedSubs = function notifyNestedSubs() {\n      this.listeners.notify();\n    };\n\n    _proto.handleChangeWrapper = function handleChangeWrapper() {\n      if (this.onStateChange) {\n        this.onStateChange();\n      }\n    };\n\n    _proto.isSubscribed = function isSubscribed() {\n      return Boolean(this.unsubscribe);\n    };\n\n    _proto.trySubscribe = function trySubscribe() {\n      if (!this.unsubscribe) {\n        this.unsubscribe = this.parentSub ? this.parentSub.addNestedSub(this.handleChangeWrapper) : this.store.subscribe(this.handleChangeWrapper);\n        this.listeners = createListenerCollection();\n      }\n    };\n\n    _proto.tryUnsubscribe = function tryUnsubscribe() {\n      if (this.unsubscribe) {\n        this.unsubscribe();\n        this.unsubscribe = null;\n        this.listeners.clear();\n        this.listeners = nullListeners;\n      }\n    };\n\n    return Subscription;\n  }();\n\n  exports[\"default\"] = Subscription;\n});","map":[[2,0,1,0],[4,0,3,0,"exports"],[4,2,3,0,"exports"],[4,9,3,7],[4,10,3,8,"__esModule"],[4,20,3,0],[4,23,3,21],[4,27,3,0],[5,0,4,0,"exports"],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8],[5,19,4,7],[5,20,4,0],[5,23,4,21],[5,28,4,26],[5,29,4,0],[7,0,6,0],[7,6,6,4,"_batch"],[7,12,6,10],[7,15,6,13,"require"],[7,26,6,20],[7,56,6,0],[9,0,11,0],[9,6,11,4,"CLEARED"],[9,13,11,11],[9,16,11,14],[9,20,11,0],[10,0,12,0],[10,6,12,4,"nullListeners"],[10,19,12,17],[10,22,12,20],[11,0,13,2,"notify"],[11,4,13,2,"notify"],[11,10,13,8],[11,12,13,10],[11,21,13,19,"notify"],[11,27,13,10],[11,30,13,28],[11,31,13,30],[12,0,12,20],[12,3,12,0],[14,0,16,0],[14,11,16,9,"createListenerCollection"],[14,35,16,0],[14,38,16,36],[15,0,17,2],[15,8,17,6,"batch"],[15,13,17,11],[15,16,17,14],[15,17,17,15],[15,20,17,18,"_batch"],[15,26,17,24],[15,27,17,25,"getBatch"],[15,35,17,14],[15,38,17,2],[16,0,20,2],[16,8,20,6,"current"],[16,15,20,13],[16,18,20,16],[16,20,20,2],[17,0,21,2],[17,8,21,6,"next"],[17,12,21,10],[17,15,21,13],[17,17,21,2],[18,0,22,2],[18,11,22,9],[19,0,23,4,"clear"],[19,6,23,4,"clear"],[19,11,23,9],[19,13,23,11],[19,22,23,20,"clear"],[19,27,23,11],[19,30,23,28],[20,0,24,6,"next"],[20,8,24,6,"next"],[20,12,24,10],[20,15,24,13,"CLEARED"],[20,22,24,6],[21,0,25,6,"current"],[21,8,25,6,"current"],[21,15,25,13],[21,18,25,16,"CLEARED"],[21,25,25,6],[22,0,26,5],[22,7,22,9],[23,0,27,4,"notify"],[23,6,27,4,"notify"],[23,12,27,10],[23,14,27,12],[23,23,27,21,"notify"],[23,29,27,12],[23,32,27,30],[24,0,28,6],[24,12,28,10,"listeners"],[24,21,28,19],[24,24,28,22,"current"],[24,31,28,29],[24,34,28,32,"next"],[24,38,28,6],[25,0,29,6,"batch"],[25,8,29,6,"batch"],[25,13,29,11],[25,14,29,12],[25,26,29,24],[26,0,30,8],[26,15,30,13],[26,19,30,17,"i"],[26,20,30,18],[26,23,30,21],[26,24,30,8],[26,26,30,24,"i"],[26,27,30,25],[26,30,30,28,"listeners"],[26,39,30,37],[26,40,30,38,"length"],[26,46,30,8],[26,48,30,46,"i"],[26,49,30,47],[26,51,30,8],[26,53,30,51],[27,0,31,10,"listeners"],[27,12,31,10,"listeners"],[27,21,31,19],[27,22,31,20,"i"],[27,23,31,19],[27,24,31,10],[28,0,32,9],[29,0,33,7],[29,9,29,11],[29,10,29,6],[30,0,34,5],[30,7,22,9],[31,0,35,4,"get"],[31,6,35,4,"get"],[31,9,35,7],[31,11,35,9],[31,20,35,18,"get"],[31,23,35,9],[31,26,35,24],[32,0,36,6],[32,15,36,13,"next"],[32,19,36,6],[33,0,37,5],[33,7,22,9],[34,0,38,4,"subscribe"],[34,6,38,4,"subscribe"],[34,15,38,13],[34,17,38,15],[34,26,38,24,"subscribe"],[34,35,38,15],[34,36,38,34,"listener"],[34,44,38,15],[34,46,38,44],[35,0,39,6],[35,12,39,10,"isSubscribed"],[35,24,39,22],[35,27,39,25],[35,31,39,6],[36,0,40,6],[36,12,40,10,"next"],[36,16,40,14],[36,21,40,19,"current"],[36,28,40,6],[36,30,40,28,"next"],[36,34,40,32],[36,37,40,35,"current"],[36,44,40,42],[36,45,40,43,"slice"],[36,50,40,35],[36,52,40,28],[37,0,41,6,"next"],[37,8,41,6,"next"],[37,12,41,10],[37,13,41,11,"push"],[37,17,41,6],[37,18,41,16,"listener"],[37,26,41,6],[38,0,42,6],[38,15,42,13],[38,24,42,22,"unsubscribe"],[38,35,42,13],[38,38,42,36],[39,0,43,8],[39,14,43,12],[39,15,43,13,"isSubscribed"],[39,27,43,12],[39,31,43,29,"current"],[39,38,43,36],[39,43,43,41,"CLEARED"],[39,50,43,8],[39,52,43,50],[40,0,44,8,"isSubscribed"],[40,10,44,8,"isSubscribed"],[40,22,44,20],[40,25,44,23],[40,30,44,8],[41,0,45,8],[41,14,45,12,"next"],[41,18,45,16],[41,23,45,21,"current"],[41,30,45,8],[41,32,45,30,"next"],[41,36,45,34],[41,39,45,37,"current"],[41,46,45,44],[41,47,45,45,"slice"],[41,52,45,37],[41,54,45,30],[42,0,46,8,"next"],[42,10,46,8,"next"],[42,14,46,12],[42,15,46,13,"splice"],[42,21,46,8],[42,22,46,20,"next"],[42,26,46,24],[42,27,46,25,"indexOf"],[42,34,46,20],[42,35,46,33,"listener"],[42,43,46,20],[42,44,46,8],[42,46,46,44],[42,47,46,8],[43,0,47,7],[43,9,42,6],[44,0,48,5],[45,0,22,9],[45,5,22,2],[46,0,50,1],[48,0,52,0],[48,6,52,4,"Subscription"],[48,18,52,16],[48,21,54,0],[48,33,54,12],[49,0,55,2],[49,13,55,11,"Subscription"],[49,25,55,2],[49,26,55,24,"store"],[49,31,55,2],[49,33,55,31,"parentSub"],[49,42,55,2],[49,44,55,42],[50,0,56,4],[50,11,56,9,"store"],[50,16,56,4],[50,19,56,17,"store"],[50,24,56,4],[51,0,57,4],[51,11,57,9,"parentSub"],[51,20,57,4],[51,23,57,21,"parentSub"],[51,32,57,4],[52,0,58,4],[52,11,58,9,"unsubscribe"],[52,22,58,4],[52,25,58,23],[52,29,58,4],[53,0,59,4],[53,11,59,9,"listeners"],[53,20,59,4],[53,23,59,21,"nullListeners"],[53,36,59,4],[54,0,60,4],[54,11,60,9,"handleChangeWrapper"],[54,30,60,4],[54,33,60,31],[54,38,60,36,"handleChangeWrapper"],[54,57,60,31],[54,58,60,56,"bind"],[54,62,60,31],[54,63,60,61],[54,67,60,31],[54,68,60,4],[55,0,61,3],[57,0,63,2],[57,8,63,6,"_proto"],[57,14,63,12],[57,17,63,15,"Subscription"],[57,29,63,27],[57,30,63,28,"prototype"],[57,39,63,2],[59,0,65,2,"_proto"],[59,4,65,2,"_proto"],[59,10,65,8],[59,11,65,9,"addNestedSub"],[59,23,65,2],[59,26,65,24],[59,35,65,33,"addNestedSub"],[59,47,65,24],[59,48,65,46,"listener"],[59,56,65,24],[59,58,65,56],[60,0,66,4],[60,11,66,9,"trySubscribe"],[60,23,66,4],[61,0,67,4],[61,13,67,11],[61,18,67,16,"listeners"],[61,27,67,11],[61,28,67,26,"subscribe"],[61,37,67,11],[61,38,67,36,"listener"],[61,46,67,11],[61,47,67,4],[62,0,68,3],[62,5,65,2],[64,0,70,2,"_proto"],[64,4,70,2,"_proto"],[64,10,70,8],[64,11,70,9,"notifyNestedSubs"],[64,27,70,2],[64,30,70,28],[64,39,70,37,"notifyNestedSubs"],[64,55,70,28],[64,58,70,56],[65,0,71,4],[65,11,71,9,"listeners"],[65,20,71,4],[65,21,71,19,"notify"],[65,27,71,4],[66,0,72,3],[66,5,70,2],[68,0,74,2,"_proto"],[68,4,74,2,"_proto"],[68,10,74,8],[68,11,74,9,"handleChangeWrapper"],[68,30,74,2],[68,33,74,31],[68,42,74,40,"handleChangeWrapper"],[68,61,74,31],[68,64,74,62],[69,0,75,4],[69,10,75,8],[69,15,75,13,"onStateChange"],[69,28,75,4],[69,30,75,28],[70,0,76,6],[70,13,76,11,"onStateChange"],[70,26,76,6],[71,0,77,5],[72,0,78,3],[72,5,74,2],[74,0,80,2,"_proto"],[74,4,80,2,"_proto"],[74,10,80,8],[74,11,80,9,"isSubscribed"],[74,23,80,2],[74,26,80,24],[74,35,80,33,"isSubscribed"],[74,47,80,24],[74,50,80,48],[75,0,81,4],[75,13,81,11,"Boolean"],[75,20,81,18],[75,21,81,19],[75,26,81,24,"unsubscribe"],[75,37,81,18],[75,38,81,4],[76,0,82,3],[76,5,80,2],[78,0,84,2,"_proto"],[78,4,84,2,"_proto"],[78,10,84,8],[78,11,84,9,"trySubscribe"],[78,23,84,2],[78,26,84,24],[78,35,84,33,"trySubscribe"],[78,47,84,24],[78,50,84,48],[79,0,85,4],[79,10,85,8],[79,11,85,9],[79,16,85,14,"unsubscribe"],[79,27,85,4],[79,29,85,27],[80,0,86,6],[80,13,86,11,"unsubscribe"],[80,24,86,6],[80,27,86,25],[80,32,86,30,"parentSub"],[80,41,86,25],[80,44,86,42],[80,49,86,47,"parentSub"],[80,58,86,42],[80,59,86,57,"addNestedSub"],[80,71,86,42],[80,72,86,70],[80,77,86,75,"handleChangeWrapper"],[80,96,86,42],[80,97,86,25],[80,100,86,98],[80,105,86,103,"store"],[80,110,86,98],[80,111,86,109,"subscribe"],[80,120,86,98],[80,121,86,119],[80,126,86,124,"handleChangeWrapper"],[80,145,86,98],[80,146,86,6],[81,0,87,6],[81,13,87,11,"listeners"],[81,22,87,6],[81,25,87,23,"createListenerCollection"],[81,49,87,47],[81,51,87,6],[82,0,88,5],[83,0,89,3],[83,5,84,2],[85,0,91,2,"_proto"],[85,4,91,2,"_proto"],[85,10,91,8],[85,11,91,9,"tryUnsubscribe"],[85,25,91,2],[85,28,91,26],[85,37,91,35,"tryUnsubscribe"],[85,51,91,26],[85,54,91,52],[86,0,92,4],[86,10,92,8],[86,15,92,13,"unsubscribe"],[86,26,92,4],[86,28,92,26],[87,0,93,6],[87,13,93,11,"unsubscribe"],[87,24,93,6],[88,0,94,6],[88,13,94,11,"unsubscribe"],[88,24,94,6],[88,27,94,25],[88,31,94,6],[89,0,95,6],[89,13,95,11,"listeners"],[89,22,95,6],[89,23,95,21,"clear"],[89,28,95,6],[90,0,96,6],[90,13,96,11,"listeners"],[90,22,96,6],[90,25,96,23,"nullListeners"],[90,38,96,6],[91,0,97,5],[92,0,98,3],[92,5,91,2],[94,0,100,2],[94,11,100,9,"Subscription"],[94,23,100,2],[95,0,101,1],[95,3,54,0],[95,5,52,0],[97,0,103,0,"exports"],[97,2,103,0,"exports"],[97,9,103,7],[97,10,103,8],[97,19,103,7],[97,20,103,0],[97,23,103,21,"Subscription"],[97,35,103,0]]},"type":"js/module"}]}