{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/assertThisInitialized","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"./Reference","data":{"isAsync":false}},{"name":"./transaction","data":{"isAsync":false}},{"name":"../../utils/ModuleBase","data":{"isAsync":false}},{"name":"../../utils/native","data":{"isAsync":false}},{"name":"../core/firebase","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.statics = exports.default = exports.NAMESPACE = exports.MODULE_NAME = void 0;\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n\n  var _possibleConstructorReturn2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/possibleConstructorReturn\"));\n\n  var _getPrototypeOf2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/getPrototypeOf\"));\n\n  var _assertThisInitialized2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"@babel/runtime/helpers/assertThisInitialized\"));\n\n  var _inherits2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"@babel/runtime/helpers/inherits\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[7], \"react-native\");\n\n  var _Reference = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[8], \"./Reference\"));\n\n  var _transaction = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[9], \"./transaction\"));\n\n  var _ModuleBase2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[10], \"../../utils/ModuleBase\"));\n\n  var _native = _$$_REQUIRE(_dependencyMap[11], \"../../utils/native\");\n\n  var _firebase = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[12], \"../core/firebase\"));\n\n  var NATIVE_EVENTS = ['database_transaction_event'];\n  var MODULE_NAME = 'RNFirebaseDatabase';\n  exports.MODULE_NAME = MODULE_NAME;\n  var NAMESPACE = 'database';\n  exports.NAMESPACE = NAMESPACE;\n\n  var Database = function (_ModuleBase) {\n    (0, _inherits2.default)(Database, _ModuleBase);\n\n    function Database(appOrCustomUrl, customUrl) {\n      var _this;\n\n      (0, _classCallCheck2.default)(this, Database);\n      var app;\n      var url;\n\n      if (typeof appOrCustomUrl === 'string') {\n        app = _firebase.default.app();\n        url = appOrCustomUrl;\n      } else {\n        app = appOrCustomUrl;\n        url = customUrl || app.options.databaseURL;\n      }\n\n      url = url.endsWith('/') ? url : url + \"/\";\n      _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(Database).call(this, app, {\n        events: NATIVE_EVENTS,\n        moduleName: MODULE_NAME,\n        hasMultiAppSupport: true,\n        hasCustomUrlSupport: true,\n        namespace: NAMESPACE\n      }, url));\n      _this._serverTimeOffset = 0;\n      _this._databaseURL = url;\n      _this._transactionHandler = new _transaction.default((0, _assertThisInitialized2.default)(_this));\n\n      if (app.options.persistence) {\n        (0, _native.getNativeModule)((0, _assertThisInitialized2.default)(_this)).setPersistence(app.options.persistence);\n      }\n\n      setTimeout(function () {\n        _this._offsetRef = _this.ref('.info/serverTimeOffset');\n\n        _this._offsetRef.on('value', function (snapshot) {\n          _this._serverTimeOffset = snapshot.val() || _this._serverTimeOffset;\n        });\n      }, 1);\n      return _this;\n    }\n\n    (0, _createClass2.default)(Database, [{\n      key: \"getServerTime\",\n      value: function getServerTime() {\n        return new Date(Date.now() + this._serverTimeOffset);\n      }\n    }, {\n      key: \"goOnline\",\n      value: function goOnline() {\n        (0, _native.getNativeModule)(this).goOnline();\n      }\n    }, {\n      key: \"goOffline\",\n      value: function goOffline() {\n        (0, _native.getNativeModule)(this).goOffline();\n      }\n    }, {\n      key: \"ref\",\n      value: function ref(path) {\n        return new _Reference.default(this, path);\n      }\n    }, {\n      key: \"databaseUrl\",\n      get: function get() {\n        return this._databaseURL;\n      }\n    }]);\n    return Database;\n  }(_ModuleBase2.default);\n\n  exports.default = Database;\n  var statics = {\n    ServerValue: _reactNative.NativeModules.RNFirebaseDatabase ? {\n      TIMESTAMP: _reactNative.NativeModules.RNFirebaseDatabase.serverValueTimestamp || {\n        '.sv': 'timestamp'\n      }\n    } : {},\n    enableLogging: function enableLogging(enabled) {\n      if (_reactNative.NativeModules[MODULE_NAME]) {\n        _reactNative.NativeModules[MODULE_NAME].enableLogging(enabled);\n      }\n    }\n  };\n  exports.statics = statics;\n});","map":[[21,0,5,0],[23,0,6,0],[25,0,7,0],[27,0,8,0],[29,0,9,0],[31,0,10,0],[33,0,11,0],[33,6,11,6,"NATIVE_EVENTS"],[33,19,11,19],[33,22,11,22],[33,23,11,23],[33,51,11,22],[33,52,11,0],[34,0,12,7],[34,6,12,13,"MODULE_NAME"],[34,17,12,24],[34,20,12,27],[34,40,12,7],[36,0,13,7],[36,6,13,13,"NAMESPACE"],[36,15,13,22],[36,18,13,25],[36,28,13,7],[39,6,18,21,"Database"],[39,14],[42,0,19,2],[42,22,19,14,"appOrCustomUrl"],[42,36,19,2],[42,38,19,30,"customUrl"],[42,47,19,2],[42,49,19,41],[43,0,19,41],[45,0,19,41],[46,0,20,4],[46,10,20,8,"app"],[46,13,20,4],[47,0,21,4],[47,10,21,8,"url"],[47,13,21,4],[49,0,23,4],[49,10,23,8],[49,17,23,15,"appOrCustomUrl"],[49,31,23,8],[49,36,23,34],[49,44,23,4],[49,46,23,44],[50,0,24,6,"app"],[50,8,24,6,"app"],[50,11,24,9],[50,14,24,12,"firebase"],[50,32,24,21,"app"],[50,35,24,12],[50,37,24,6],[51,0,25,6,"url"],[51,8,25,6,"url"],[51,11,25,9],[51,14,25,12,"appOrCustomUrl"],[51,28,25,6],[52,0,26,5],[52,7,23,4],[52,13,26,11],[53,0,27,6,"app"],[53,8,27,6,"app"],[53,11,27,9],[53,14,27,12,"appOrCustomUrl"],[53,28,27,6],[54,0,28,6,"url"],[54,8,28,6,"url"],[54,11,28,9],[54,14,28,12,"customUrl"],[54,23,28,21],[54,27,28,25,"app"],[54,30,28,28],[54,31,28,29,"options"],[54,38,28,25],[54,39,28,37,"databaseURL"],[54,50,28,6],[55,0,29,5],[57,0,32,4,"url"],[57,6,32,4,"url"],[57,9,32,7],[57,12,32,10,"url"],[57,15,32,13],[57,16,32,14,"endsWith"],[57,24,32,10],[57,25,32,23],[57,28,32,10],[57,32,32,30,"url"],[57,35,32,10],[57,38,32,39,"url"],[57,41,32,10],[57,47,32,4],[58,0,33,4],[58,112,33,10,"app"],[58,115,33,4],[58,117,33,15],[59,0,34,6,"events"],[59,8,34,6,"events"],[59,14,34,12],[59,16,34,14,"NATIVE_EVENTS"],[59,29,33,15],[60,0,35,6,"moduleName"],[60,8,35,6,"moduleName"],[60,18,35,16],[60,20,35,18,"MODULE_NAME"],[60,31,33,15],[61,0,36,6,"hasMultiAppSupport"],[61,8,36,6,"hasMultiAppSupport"],[61,26,36,24],[61,28,36,26],[61,32,33,15],[62,0,37,6,"hasCustomUrlSupport"],[62,8,37,6,"hasCustomUrlSupport"],[62,27,37,25],[62,29,37,27],[62,33,33,15],[63,0,38,6,"namespace"],[63,8,38,6,"namespace"],[63,17,38,15],[63,19,38,17,"NAMESPACE"],[64,0,33,15],[64,7,33,4],[64,9,39,7,"url"],[64,12,33,4],[65,0,40,4],[65,12,40,9,"_serverTimeOffset"],[65,29,40,4],[65,32,40,29],[65,33,40,4],[66,0,41,4],[66,12,41,9,"_databaseURL"],[66,24,41,4],[66,27,41,24,"url"],[66,30,41,4],[67,0,42,4],[67,12,42,9,"_transactionHandler"],[67,31,42,4],[67,34,42,31],[67,38,42,35,"TransactionHandler"],[67,58,42,31],[67,103,42,4],[69,0,44,4],[69,10,44,8,"app"],[69,13,44,11],[69,14,44,12,"options"],[69,21,44,8],[69,22,44,20,"persistence"],[69,33,44,4],[69,35,44,33],[70,0,45,6],[70,82,45,28,"setPersistence"],[70,96,45,6],[70,97,45,43,"app"],[70,100,45,46],[70,101,45,47,"options"],[70,108,45,43],[70,109,45,55,"persistence"],[70,120,45,6],[71,0,46,5],[73,0,52,4,"setTimeout"],[73,6,52,4,"setTimeout"],[73,16,52,14],[73,17,52,15],[73,29,52,21],[74,0,53,6],[74,14,53,11,"_offsetRef"],[74,24,53,6],[74,27,53,24],[74,33,53,29,"ref"],[74,36,53,24],[74,37,53,33],[74,61,53,24],[74,62,53,6],[76,0,55,6],[76,14,55,11,"_offsetRef"],[76,24,55,6],[76,25,55,22,"on"],[76,27,55,6],[76,28,55,25],[76,35,55,6],[76,37,55,34],[76,47,55,34,"snapshot"],[76,55,55,42],[76,57,55,46],[77,0,56,8],[77,16,56,13,"_serverTimeOffset"],[77,33,56,8],[77,36,56,33,"snapshot"],[77,44,56,41],[77,45,56,42,"val"],[77,48,56,33],[77,54,56,51],[77,60,56,56,"_serverTimeOffset"],[77,77,56,8],[78,0,57,7],[78,9,55,6],[79,0,58,5],[79,7,52,14],[79,9,58,7],[79,10,52,14],[79,11,52,4],[80,0,19,41],[81,0,59,3],[85,38,66,18],[86,0,67,4],[86,15,67,11],[86,19,67,15,"Date"],[86,23,67,11],[86,24,67,20,"Date"],[86,28,67,24],[86,29,67,25,"now"],[86,32,67,20],[86,37,67,33],[86,42,67,38,"_serverTimeOffset"],[86,59,67,11],[86,60,67,4],[87,0,68,3],[90,33,74,13],[91,0,75,4],[91,37,75,20],[91,41,75,4],[91,43,75,26,"goOnline"],[91,51,75,4],[92,0,76,3],[95,34,82,14],[96,0,83,4],[96,37,83,20],[96,41,83,4],[96,43,83,26,"goOffline"],[96,52,83,4],[97,0,84,3],[100,26,92,6,"path"],[100,30],[100,32,92,12],[101,0,93,4],[101,15,93,11],[101,19,93,15,"Reference"],[101,37,93,11],[101,38,93,25],[101,42,93,11],[101,44,93,31,"path"],[101,48,93,11],[101,49,93,4],[102,0,94,3],[105,26,101,20],[106,0,102,4],[106,15,102,11],[106,20,102,16,"_databaseURL"],[106,32,102,4],[107,0,103,3],[110,4,18,38,"ModuleBase"],[110,24],[113,0,106,7],[113,6,106,13,"statics"],[113,13,106,20],[113,16,106,23],[114,0,107,2,"ServerValue"],[114,4,107,2,"ServerValue"],[114,15,107,13],[114,17,107,15,"NativeModules"],[114,44,107,29,"RNFirebaseDatabase"],[114,62,107,15],[114,65,107,50],[115,0,108,4,"TIMESTAMP"],[115,6,108,4,"TIMESTAMP"],[115,15,108,13],[115,17,108,15,"NativeModules"],[115,44,108,29,"RNFirebaseDatabase"],[115,62,108,15],[115,63,108,48,"serverValueTimestamp"],[115,83,108,15],[115,87,108,72],[116,0,109,6],[116,15,109,13],[117,0,108,72],[118,0,107,50],[118,5,107,15],[118,8,111,6],[118,10,106,23],[119,0,113,2,"enableLogging"],[119,4,113,2,"enableLogging"],[119,17,106,23],[119,42,113,16,"enabled"],[119,49,106,23],[119,51,113,25],[120,0,114,4],[120,10,114,8,"NativeModules"],[120,37,114,22,"MODULE_NAME"],[120,48,114,8],[120,49,114,4],[120,51,114,36],[121,0,115,6,"NativeModules"],[121,35,115,20,"MODULE_NAME"],[121,46,115,6],[121,48,115,33,"enableLogging"],[121,61,115,6],[121,62,115,47,"enabled"],[121,69,115,6],[122,0,116,5],[123,0,117,3],[124,0,106,23],[124,3,106,7]]},"type":"js/module"}]}